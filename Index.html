<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RajHub - Premium Student Essentials</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- ADDED: Google Fonts CDN for Quicksand (Rounded Font) -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700;900&display=swap" rel="stylesheet">

    <style>
        /* Custom styles for the minimal, premium look */
        .header-charcoal { background-color: #2C3E50; /* Deep Charcoal Primary */ }
        .text-teal { color: #1ABC9C; /* Vibrant Teal Accent */ }
        .bg-teal-accent { background-color: #1ABC9C; /* Vibrant Teal Accent */ }
        
        /* --- FONT FIX: ENFORCING QUICKSAND FOR A CONSISTENT ROUNDED LOOK --- */
        body, button, input, textarea, select, h1, h2, h3, a {
            font-family: 'Quicksand', sans-serif !important; 
        }
        /* Increased font weight mapping for Quicksand */
        h1, h2, h3, .font-black {
            font-weight: 900 !important; /* Use the highest weight for font-black */
        }
        .font-extrabold {
            font-weight: 700 !important;
        }
        
        body {
            background-color: #f8fafc; /* Tailwind gray-50 */
            transition: background-color 0.3s;
        }

        /* Styles for the auto-scrolling product track (Applies to all carousels on desktop) */
        .product-track {
            display: flex;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch; 
            padding-bottom: 1rem;
            /* Adjusted padding for touch target comfort */
            padding-left: 0.5rem; 
            padding-right: 0.5rem;
        }
        .product-card {
            /* MOBILE WIDTH (Applies when track is NOT visible, but used inside a track on mobile too) */
            flex: 0 0 calc(38% - 8px); 
            max-width: none;
            scroll-snap-align: start;
            margin-right: 1rem;
            margin-left: 0.5rem; 
        }
        
        /* DESKTOP: Keep existing size, remove mobile margin/padding fixes */
        @media (min-width: 768px) {
            .product-card {
                /* Larger desktop/tablet width */
                flex: 0 0 28%; 
                max-width: 260px;
                margin-left: 0; 
            }
            .product-track {
                padding-left: 0;
                padding-right: 0;
            }
        }

        /* Hide scrollbar visually */
        .product-track::-webkit-scrollbar { display: none; }
        .product-track { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Modal Overlay */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.75);
            transition: opacity 0.3s ease-out;
        }
        /* Utility class for the toggled element transition */
        .rotate-90 {
            transform: rotate(90deg);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'charcoal': '#2C3E50',
                        'teal-accent': '#1ABC9C',
                        'light-gray': '#F4F4F4',
                        'salmon-accent': '#FF6B6B', // The eye-catching color for price
                    }
                }
            }
        }

        const productData = [
            // --- Featured (6 Items: ids 1, 4, 8, 2, 5, 6) ---
            { id: 1, name: "Matador i-teen Gel Pen (6-Pack)", category: "Stationery", price: 61, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Matador+Pen" },
            { id: 4, name: "Minimalist Silver Stud Earrings", category: "Girls Hub", price: 169, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Earrings" },
            { id: 8, name: "Water-Resistant Laptop Backpack", category: "Bags", price: 1440, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Backpack" },
            { id: 2, name: "A4 Notebook (200 Pages)", category: "Stationery", price: 108, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=A4+Notebook" },
            { id: 5, name: "Aesthetic Spiral Planner (2025)", category: "Girls Hub", price: 280, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Planner" },
            { id: 6, name: "32GB USB 3.0 Flash Drive", category: "Boys Hub", price: 495, isFeatured: true, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Flash+Drive" },


            // --- Stationery (Remaining items only) ---
            { id: 11, name: "Scientific Calculator (FX-991)", category: "Stationery", price: 855, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Calculator" },
            { id: 3, name: "Faber-Castell 2B Pencil Set", category: "Stationery", price: 72, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Pencil+Set" },
            { id: 12, name: "Highlight Marker Set (6 Colors)", category: "Stationery", price: 144, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Markers" },
            { id: 21, name: "Lamy-Style Fountain Pen (Budget)", category: "Stationery", price: 342, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Fountain+Pen" },
            { id: 22, name: "White Correction Pen Set (3 PCS)", category: "Stationery", price: 99, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Correction+Pen" },
            { id: 23, name: "PVC Clear Book Cover Rolls", category: "Stationery", price: 120, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Book+Covers" },


            // --- Girls Hub (Remaining items only) ---
            { id: 13, name: "Pastel Gel Ink Pen Set", category: "Girls Hub", price: 200, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Pastel+Pens" },
            { id: 14, name: "Hair Scrunchie Pack (10 PCS)", category: "Girls Hub", price: 120, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Scrunchies" },
            { id: 15, name: "Compact Makeup Mirror", category: "Girls Hub", price: 84, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Mirror" },
            { id: 24, name: "Cute Animal Eraser Set (5 PCS)", category: "Girls Hub", price: 64, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Eraser+Set" },
            { id: 25, name: "Kawaii Bear Sticky Notes Set", category: "Girls Hub", price: 153, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Sticky+Notes" },
            { id: 26, name: "Multi-Color Cable Organizers (5-Pack)", category: "Girls Hub", price: 117, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Cable+Ties" },
            { id: 27, name: "Pastel Color Metal Water Bottle (500ml)", category: "Girls Hub", price: 424, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Water+Bottle" },
            

            // --- Boys Hub (Remaining items only) ---
            { id: 16, name: "Multi-Tool Keychain (Student Edition)", category: "Boys Hub", price: 112, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Multi-Tool" },
            { id: 7, name: "Minimalist Bi-Fold Wallet (Black)", category: "Boys Hub", price: 238, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Wallet" },
            { id: 17, name: "Wired Gaming Mouse (Budget)", category: "Boys Hub", price: 382, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Mouse" },
            { id: 18, name: "Premium Phone Stand", category: "Boys Hub", price: 179, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Phone+Stand" },
            { id: 28, name: "10000mAh Power Bank (Compact)", category: "Boys Hub", price: 1125, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Power+Bank" },
            { id: 29, name: "USB-C to USB-A Adapter (2-Pack)", category: "Boys Hub", price: 246, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=USB+Adapter" },
            { id: 30, name: "Durable Headphone Case (Hard Shell)", category: "Boys Hub", price: 272, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Headphone+Case" },


            // --- Bags (Remaining items only) ---
            { id: 20, name: "Minimalist Sling Bag", category: "Bags", price: 510, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Sling+Bag" },
            { id: 9, name: "Canvas Tote Bag (Large)", category: "Bags", price: 330, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Tote+Bag" },
            { id: 10, name: "Mesh Pencil Pouch (Zipper)", category: "Bags", price: 135, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Pouch" },
            { id: 19, name: "Drawstring Gym Bag", category: "Bags", price: 200, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Gym+Bag" },
            { id: 31, name: "Premium Pencil Box (Hard Shell)", category: "Bags", price: 357, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Pencil+Box" },
            { id: 32, name: "Folding Shopping Bag (Reusable)", category: "Bags", price: 85, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Shopping+Bag" },
            { id: 33, name: "Laptop Sleeve (14-inch, Grey)", category: "Bags", price: 675, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Laptop+Sleeve" },
            { id: 34, name: "Crossbody Small Day Bag", category: "Bags", price: 441, isFeatured: false, imageUrl: "https://placehold.co/300x200/F4F4F4/2C3E50?text=Crossbody+Bag" },
        ];
        
        // --- CORE PAGE ROUTING LOGIC ---
        let currentScrollIntervals = [];
        let currentCheckoutProduct = null; // Global state for the checkout item
        
        // Helper function to check if the current view is considered mobile (less than md breakpoint)
        function isMobileView() {
            return window.innerWidth < 768; // Tailwind md breakpoint
        }

        function showPage(pageId) {
            // Stop all ongoing auto-scroll when switching pages
            currentScrollIntervals.forEach(clearInterval);
            currentScrollIntervals = [];

            const pages = document.querySelectorAll('.content-page');
            pages.forEach(page => {
                page.classList.add('hidden');
                page.scrollTop = 0; // Scroll to top when switching page
            });

            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.remove('hidden');
            }

            // Handle unique initialization for each page
            if (pageId === 'home-page') {
                renderHomeCarousels();
                // --- Start auto-scroll ONLY for Top Selling (now isFeatured) ---
                currentScrollIntervals.push(startAutoScroll('top-selling-carousel-track'));
            } else if (pageId === 'stationary-page') {
                renderCategoryPage('Stationery');
            } else if (pageId === 'girls-hub-page') {
                renderCategoryPage('Girls Hub');
            } else if (pageId === 'boys-hub-page') {
                renderCategoryPage('Boys Hub');
            } else if (pageId === 'bags-page') {
                renderCategoryPage('Bags');
            }
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
            
            // Update URL hash for simple back/forward support (optional but helpful)
            window.location.hash = pageId;
        }

        // --- PRODUCT RENDERING FUNCTIONS ---

        // New function to render the category strip responsively (Carousel for Desktop, 1-by-1 for Mobile)
        function renderResponsiveCategoryStrip(category, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Filter non-featured products for the strip
            const products = productData.filter(p => p.category === category && !p.isFeatured);
            
            if (isMobileView() && products.length > 0) {
                // --- MOBILE VIEW LOGIC (1 by 1 + See More) ---
                const initialProduct = products[0];
                const totalRemaining = products.length - 1;

                let html = '';
                
                // Render the first product card in single-column style (isCarousel=false)
                html += renderProductCard(initialProduct, false);
                
                // Add the "See More" button if there's more than one product
                if (products.length > 1) {
                    html += `
                        <div class="text-center mt-6">
                            <!-- UPDATED: Background color changed to Light Gray for minimal look -->
                            <button onclick="toggleCategoryView('${category}', '${containerId}')" 
                                class="px-6 py-3 bg-light-gray text-charcoal border border-gray-300 font-bold rounded-full shadow-sm hover:bg-gray-200 transition duration-200 uppercase text-sm">
                                See ${totalRemaining} More Products
                            </button>
                        </div>
                    `;
                }
                container.innerHTML = html;

            } else {
                // --- DESKTOP VIEW LOGIC (Horizontal Scrollable Carousel) ---
                
                if (products.length === 0) {
                    container.innerHTML = `<p class="text-center text-gray-500 p-4">No products available in ${category}.</p>`;
                    return;
                }

                // Render all products in a horizontal scrollable strip (isCarousel=true)
                let html = `
                    <div id="${containerId}-track" class="product-track">
                        ${products.map(product => renderProductCard(product, true)).join('')}
                    </div>
                `;
                container.innerHTML = html;
            }
        }


        // Function to show all products in a single-column list (Only called from Mobile's "See More")
        function toggleCategoryView(category, containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            // Filter ALL non-featured products belonging to this category
            const products = productData.filter(p => p.category === category && !p.isFeatured);

            // Render all products in a single column, one by one. (isCarousel=false)
            const productsHTML = `
                <!-- space-y-6 ensures separation between the full-width cards -->
                <div class="space-y-6">
                    ${products.map(product => renderProductCard(product, false)).join('')}
                </div>
                <div class="text-center mt-8 mb-4">
                    <button onclick="showPage('home-page')" class="px-6 py-3 bg-teal-accent text-white font-bold rounded-full shadow-lg hover:bg-[#158C7C] transition duration-200 uppercase text-sm">
                        Back to Top Selling
                    </button>
                </div>
            `;

            container.innerHTML = productsHTML;
        }

        // Renders products for all carousels/grids on the Home Page
        function renderHomeCarousels() {
            // Featured (Carousel) Track
            const topSellingContainer = document.getElementById('top-selling-carousel-track');
            
            // 1. Top Selling (Featured) Products - RENDERED AS CAROUSEL ITEMS (isCarousel = true)
            if (topSellingContainer) {
                const featuredProducts = productData.filter(p => p.isFeatured);
                topSellingContainer.innerHTML = featuredProducts.map(product => renderProductCard(product, true)).join('');
            }
            
            // 2-5. Use the responsive strip renderer for categories
            renderResponsiveCategoryStrip('Stationery', 'stationary-category-container');
            renderResponsiveCategoryStrip('Girls Hub', 'girls-hub-category-container');
            renderResponsiveCategoryStrip('Boys Hub', 'boys-hub-category-container');
            renderResponsiveCategoryStrip('Bags', 'bags-category-container');
        }

        // Renders all products for a specific category page (Full Grid View)
        function renderCategoryPage(category) {
            const container = document.getElementById(category.toLowerCase().replace(/\s/g, '-') + '-products');
            if (!container) return;

            // Fetch ALL products belonging to this category
            const filteredProducts = productData.filter(p => p.category === category);
            
            // Display a message if no products are found
            if (filteredProducts.length === 0) {
                container.innerHTML = '<p class="text-lg text-gray-500 p-8 text-center">No products found in this category yet. Check back soon!</p>';
                return;
            }

            // Render products in a grid layout (isCarousel = false for all category page views)
            container.innerHTML = filteredProducts.map(product => renderProductCard(product, false)).join('');
        }

        // Helper function to generate a single product card HTML
        function renderProductCard(product, isCarousel) {
            // cardClass determines if it needs the 'product-card' class (for flex/scrolling) or just a static item.
            // isCarousel is true for ANY horizontal track (featured, or category strips on desktop).
            // isCarousel is false for mobile single-item view and all full category pages.
            const cardClass = isCarousel 
                ? 'product-card bg-white p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 transform hover:scale-[1.02]' 
                : 'bg-white p-5 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 transform hover:scale-[1.02]';
            
            return `
                <div class="${cardClass}">
                    <!-- IMAGE HEIGHT REMAINS h-44 -->
                    <img src="${product.imageUrl}" alt="${product.name}" class="w-full h-44 object-cover rounded-lg mb-4" onerror="this.onerror=null;this.src='https://placehold.co/300x200/E5E7EB/4B5563?text=Image+Missing';">
                    
                    <!-- Increased spacing: mb-4 instead of mb-3 -->
                    <p class="text-xs text-gray-500 mb-2">${product.category}</p>
                    
                    <!-- Increased spacing: mb-3 instead of mb-2 -->
                    <h3 class="text-lg font-semibold text-charcoal mb-3 truncate">${product.name}</h3>
                    
                    <!-- 
                        UPDATED FOR MINIMALIST MOBILE LOOK:
                        - Price is now Salmon-Accent, max bold (font-black), and larger (text-2xl).
                        - Button uses the Teal accent for the CTA.
                    -->
                    <div class="flex justify-between items-center">
                        <!-- Price on Left -->
                        <div class="text-left flex-shrink-0">
                            <!-- !!! UPDATED: Color to salmon-accent, size to text-2xl, weight to font-black !!! -->
                            <span class="final-price text-2xl font-black text-salmon-accent">৳ ${product.price}</span>
                        </div>
                        
                        <!-- Button on Right -->
                        <button onclick="handleKinunClick(${product.id})" 
                            class="kinun-button flex-shrink-0 px-4 py-1.5 bg-teal-accent text-white text-sm rounded-lg font-bold hover:bg-[#158C7C] transition duration-200 shadow-md">
                            Order Now
                        </button>
                    </div>
                </div>
            `;
        }
        
        // --- CHECKOUT LOGIC ---

        // Function to toggle the payment section visibility and arrow icon
        function togglePaymentSection() {
            const content = document.getElementById('payment-method-content');
            const icon = document.getElementById('payment-toggle-icon');

            // Toggle the hidden class
            content.classList.toggle('hidden');
            
            // Toggle the rotation class for the icon
            icon.classList.toggle('rotate-90');
        }

        // Function for the 'Order Now' button tap
        function handleKinunClick(productId) {
            const product = productData.find(p => p.id === productId);
            if (!product) {
                console.error("Product not found for ID:", productId);
                return;
            }

            currentCheckoutProduct = product;
            
            // Populate modal with product info - using product.price now
            document.getElementById('checkout-product-title').textContent = product.name;
            document.getElementById('checkout-product-price').textContent = `৳ ${product.price}`;
            document.getElementById('checkout-total-price').textContent = `৳ ${product.price}`;
            document.getElementById('product-image-modal').src = product.imageUrl;
            
            // Show the modal and prevent background scrolling
            document.getElementById('checkout-modal').classList.remove('hidden');
            document.body.classList.add('overflow-hidden'); 

            // Ensure the form content is visible (in case a confirmation message was shown previously)
            document.getElementById('modal-content-form').classList.remove('hidden');
            document.getElementById('modal-content-confirmation').classList.add('hidden');
            
            // Reset form visibility: 
            // 1. Ensure payment method content is hidden
            const paymentContent = document.getElementById('payment-method-content');
            if (!paymentContent.classList.contains('hidden')) {
                paymentContent.classList.add('hidden');
            }
            // 2. Ensure payment icon is reset (pointing right/0deg)
            document.getElementById('payment-toggle-icon').classList.remove('rotate-90');

        }

        function closeCheckoutModal() {
            document.getElementById('checkout-modal').classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
            currentCheckoutProduct = null;
            // Clear form fields
            document.getElementById('checkout-form').reset();
        }

        function handleCheckoutSubmit(event) {
            event.preventDefault();

            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const address = document.getElementById('address').value.trim();
            const paymentMethod = document.querySelector('input[name="payment_method"]:checked')?.value;

            // Simple validation
            if (!name || !phone || !address || !paymentMethod) {
                document.getElementById('form-error').textContent = "অনুগ্রহ করে সকল তথ্য পূরণ করুন এবং একটি পেমেন্ট পদ্ধতি নির্বাচন করুন। (Please fill in all details and select a payment method.)";
                document.getElementById('form-error').classList.remove('hidden');
                return;
            }
            document.getElementById('form-error').classList.add('hidden');

            const product = currentCheckoutProduct;

            // Prepare the confirmation message details - using product.price now
            const confirmationDetails = `
                <div class="text-left space-y-2 text-gray-700">
                    <p><strong>আইটেম (Item):</strong> ${product.name}</p>
                    <p><strong>মোট মূল্য (Total Price):</strong> <span class="text-teal-accent font-bold">৳ ${product.price}</span></p>
                    <p><strong>নাম (Name):</strong> ${name}</p>
                    <p><strong>ফোন (Phone):</strong> ${phone}</p>
                    <p><strong>ঠিকানা (Address):</strong> ${address}</p>
                    <p><strong>পেমেন্ট পদ্ধতি (Payment Method):</strong> ${paymentMethod}</p>
                </div>
                <p class="mt-4 text-sm text-gray-500">আপনার MFS পেমেন্ট বিবরণ নিশ্চিত করার জন্য একজন প্রতিনিধি শীঘ্রই আপনার সাথে যোগাযোগ করবেন।</p>
            `;

            // Display confirmation screen
            showConfirmationMessage(confirmationDetails);
        }

        function showConfirmationMessage(detailsHTML) {
            document.getElementById('modal-content-form').classList.add('hidden');
            const confirmationDiv = document.getElementById('modal-content-confirmation');
            confirmationDiv.classList.remove('hidden');

            confirmationDiv.innerHTML = `
                <div class="p-4 sm:p-8 text-center">
                    <!-- Checkmark Icon -->
                    <svg class="w-16 h-16 text-teal-accent mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    
                    <h2 class="text-2xl font-bold text-charcoal mb-4">অর্ডার নিশ্চিত! (Order Confirmed!)</h2>
                    
                    <div class="bg-light-gray p-4 rounded-lg shadow-inner inline-block text-left">
                        ${detailsHTML}
                    </div>

                    <button onclick="closeCheckoutModal()" class="mt-8 w-full px-6 py-3 bg-teal-accent text-white rounded-full font-bold hover:bg-[#158C7C] transition duration-200">
                        কেনাকাটা চালিয়ে যান (Continue Shopping)
                    </button>
                </div>
            `;
        }
        
        // --- UTILITY FUNCTIONS ---
        
        // Manual scroll for carousel buttons
        function scrollCarousel(trackId, direction) {
            const track = document.getElementById(trackId);
            if (!track) return;
            const firstCard = track.querySelector('.product-card');
            if (!firstCard) return;
            // Use clientWidth to get the visible width for a smoother scroll jump
            const scrollDistance = track.clientWidth * 0.9; 

            if (direction === 'next') {
                track.scrollLeft += scrollDistance;
            } else if (direction === 'prev') {
                track.scrollLeft -= scrollDistance;
            }
        }

        // Auto-scrolling logic for the homepage carousel (ONLY for Top Selling)
        const scrollDuration = 5000; // 5 seconds

        function startAutoScroll(trackId) {
            const track = document.getElementById(trackId);
            if (!track) return;

            const scrollNext = () => {
                const firstCard = track.querySelector('.product-card');
                if (!firstCard) return;

                const itemWidth = firstCard.offsetWidth + 16; // Card width + margin-right (1rem = 16px)
                const currentScroll = track.scrollLeft;
                const maxScroll = track.scrollWidth - track.clientWidth;
                
                // If at the end, smoothly scroll to the start
                if (currentScroll >= maxScroll - 5) { 
                    track.scrollLeft = 0;
                } else {
                    track.scrollLeft += itemWidth;
                }
            };

            // Return the interval ID so it can be stored and cleared later
            return setInterval(scrollNext, scrollDuration);
        }
        
        // --- Initialization ---
        
        // Function to re-render carousels on resize if the view mode changes
        let resizeTimeout;
        let lastIsMobile = isMobileView();

        function handleResize() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                const currentIsMobile = isMobileView();
                // Only re-render if the state (mobile vs desktop) has actually changed
                if (currentIsMobile !== lastIsMobile) {
                    if (document.getElementById('home-page').classList.contains('hidden') === false) {
                        renderHomeCarousels();
                    }
                    lastIsMobile = currentIsMobile;
                }
            }, 250); // Debounce time
        }
        
        window.addEventListener('resize', handleResize);
        
        window.onload = function() {
            // Mobile Menu Toggle
            const menuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');

            menuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Check URL hash for initial page load
            const initialPage = window.location.hash.substring(1) || 'home-page';
            showPage(initialPage);
        };
    </script>
</head>
<body class="bg-white text-gray-800 font-sans min-h-screen flex flex-col">

    <!-- HEADER (Navigation) -->
    <header class="header-charcoal text-white shadow-lg sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- The core flexible container: Logo on Left, Navigation Block on Right -->
            <div class="flex justify-between items-center h-16">
                
                <!-- 1. LEFT SIDE: Logo/Brand Name -->
                <div class="flex-shrink-0 flex items-center font-extrabold text-2xl">
                    <!-- R in Teal -->
                    <span class="text-teal-accent">R</span>
                    <!-- aj in White (Against the charcoal background) -->
                    <span class="text-white">aj</span>
                    <!-- H in Teal -->
                    <span class="text-teal-accent">H</span>
                    <!-- ub in White -->
                    <span class="text-white">ub</span>
                </div>

                <!-- 2. RIGHT SIDE: Others (Navigation Links, Icons, and Mobile Menu Toggle) -->
                <div class="flex items-center space-x-4">
                    
                    <!-- Desktop Navigation Links (Visible on MD+) -->
                    <nav class="hidden md:flex space-x-6 text-sm font-medium">
                        <a href="#" onclick="showPage('home-page')" class="nav-link hover:text-teal-accent transition duration-150">Home</a>
                        <a href="#" onclick="showPage('stationary-page')" class="nav-link hover:text-teal-accent transition duration-150">Stationery</a>
                        <a href="#" onclick="showPage('girls-hub-page')" class="nav-link hover:text-teal-accent transition duration-150">Girls Hub</a>
                        <a href="#" onclick="showPage('boys-hub-page')" class="nav-link hover:text-teal-accent transition duration-150">Boys Hub</a>
                        <a href="#" onclick="showPage('bags-page')" class="nav-link hover:text-teal-accent transition duration-150">Bags</a>
                    </nav>

                    <!-- Utility Icons (Always visible next to menu links/toggle) -->
                    <div class="flex items-center space-x-3">
                        <button class="text-gray-300 hover:text-teal-accent" title="Search">
                            <!-- Search Icon SVG -->
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </button>
                        <button class="text-gray-300 hover:text-teal-accent hidden sm:block" title="Account">
                            <!-- Account Icon SVG (Hidden on mobile for space, relying on menu) -->
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        </button>
                        <button class="flex items-center text-gray-300 hover:text-teal-accent relative" title="Cart">
                            <!-- Cart Icon SVG -->
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            <span class="absolute -top-1 -right-1 bg-teal-accent text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center">0</span>
                        </button>
                    </div>

                    <!-- Mobile Menu Button (Toggle - Hidden on Desktop) -->
                    <button id="mobile-menu-btn" class="md:hidden text-gray-300 hover:text-teal-accent" title="Menu">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu (Categories shown upon click) -->
        <div id="mobile-menu" class="hidden md:hidden bg-gray-800 border-t border-gray-600">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 text-sm">
                <a href="#" onclick="showPage('home-page')" class="block px-3 py-2 rounded-md font-medium text-white hover:bg-charcoal">Home</a>
                <a href="#" onclick="showPage('stationary-page')" class="block px-3 py-2 rounded-md font-medium text-white hover:bg-charcoal">Stationery</a>
                <a href="#" onclick="showPage('girls-hub-page')" class="block px-3 py-2 rounded-md font-medium text-white hover:bg-charcoal">Girls Hub</a>
                <a href="#" onclick="showPage('boys-hub-page')" class="block px-3 py-2 rounded-md font-medium text-white hover:bg-charcoal">Boys Hub</a>
                <a href="#" onclick="showPage('bags-page')" class="block px-3 py-2 rounded-md font-medium text-white hover:bg-charcoal">Bags</a>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT CONTAINER (The SPA Router) -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 w-full">
        
        <!-- ============================================== -->
        <!-- 1. HOME PAGE VIEW -->
        <!-- ============================================== -->
        <section id="home-page" class="content-page">
            
            <!-- HERO SECTION -->
            <section class="mb-12 rounded-xl overflow-hidden shadow-xl bg-light-gray">
                
                <!-- 1. Image Block -->
                <div class="h-48 sm:h-80 w-full">
                    <img src="https://placehold.co/1200x400/1ABC9C/FFFFFF?text=RajHub+Hero" alt="Hero Banner" class="w-full h-full object-cover">
                </div>

                <!-- 2. Text Block -->
                <div class="p-6 sm:p-10 text-center">
                    <h1 class="text-3xl sm:text-5xl font-extrabold text-charcoal mb-3 leading-tight">
                        Students Friendly Hub In Rajshahi
                    </h1>
                    <p class="text-base sm:text-xl text-gray-600 mb-6">Premium Essentials for a Minimal Price. Guaranteed Student Savings!</p>
                    <!-- View Top Selling Deals Button was removed here per user request -->
                </div>
            </section>
            
            <!-- --- FEATURED CAROUSELS --- -->

            <!-- 1. TOP SELLING STRIP (CAROUSEL) -->
            <section id="top-selling-products-strip" class="mb-12 relative">
                <h2 class="text-2xl sm:text-3xl font-bold text-charcoal mb-6 border-b-2 border-teal-accent pb-2">Top Selling</h2>

                <!-- Navigation Buttons (Hidden on small screens to rely on touch scroll) -->
                <div class="absolute top-1/2 -left-3 transform -translate-y-1/2 z-10 hidden md:block">
                    <button onclick="scrollCarousel('top-selling-carousel-track', 'prev')" class="p-3 bg-white rounded-full shadow-lg text-charcoal hover:bg-light-gray transition duration-200">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                </div>
                <div class="absolute top-1/2 -right-3 transform -translate-y-1/2 z-10 hidden md:block">
                    <button onclick="scrollCarousel('top-selling-carousel-track', 'next')" class="p-3 bg-white rounded-full shadow-lg text-charcoal hover:bg-light-gray transition duration-200">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>

                <!-- Product Cards Track: Uses 'product-track' class for horizontal scroll -->
                <div id="top-selling-carousel-track" class="product-track">
                    <!-- Top Selling product cards are rendered here by JavaScript: renderHomeCarousels() -->
                </div>
            </section>
            
            <!-- --- CATEGORY LISTS (NEW: Responsive view) --- -->
            
            <!-- 2. STATIONERY HUB STRIP -->
            <section id="stationary-products-strip" class="mb-12 relative">
                <h2 class="text-2xl sm:text-3xl font-bold text-charcoal mb-6 border-b-2 border-teal-accent pb-2">Stationery Hub</h2>
                <!-- Container for the single item (mobile) or the expanded list/carousel (desktop) -->
                <div id="stationary-category-container">
                    <!-- Content generated by JS: Initial 1 item + See More button (mobile) OR Full Carousel (desktop) -->
                </div>
            </section>
            
            <!-- 3. GIRLS HUB STRIP -->
            <section id="girls-hub-products-strip" class="mb-12 relative">
                <h2 class="text-2xl sm:text-3xl font-bold text-charcoal mb-6 border-b-2 border-teal-accent pb-2">Girls Hub</h2>
                <div id="girls-hub-category-container">
                    <!-- Content generated by JS -->
                </div>
            </section>

            <!-- 4. BOYS HUB STRIP -->
            <section id="boys-hub-products-strip" class="mb-12 relative">
                <h2 class="text-2xl sm:text-3xl font-bold text-charcoal mb-6 border-b-2 border-teal-accent pb-2">Boys Hub</h2>
                <div id="boys-hub-category-container">
                    <!-- Content generated by JS -->
                </div>
            </section>

            <!-- 5. BAGS STRIP -->
            <section id="bags-products-strip" class="mb-12 relative">
                <h2 class="text-2xl sm:text-3xl font-bold text-charcoal mb-6 border-b-2 border-teal-accent pb-2">Bags & Backpacks</h2>
                <div id="bags-category-container">
                    <!-- Content generated by JS -->
                </div>
            </section>
            
        </section>

        <!-- ============================================== -->
        <!-- 2. CATEGORY PAGES VIEW (Full Grid) -->
        <!-- ============================================== -->
        <section id="stationary-page" class="content-page hidden min-h-[60vh]">
            <h1 class="text-3xl font-bold text-charcoal mb-8 border-b-2 border-teal-accent pb-2">Stationery Essentials</h1>
            <p class="mb-6 text-gray-600">High-quality pens, notebooks, and academic tools for focused study sessions across Rajshahi.</p>
            <!-- Full grid view for the dedicated page -->
            <div id="stationary-products" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Stationery products will be rendered here by renderCategoryPage() -->
            </div>
        </section>
        
        <section id="girls-hub-page" class="content-page hidden min-h-[60vh]">
            <h1 class="text-3xl font-bold text-charcoal mb-8 border-b-2 border-teal-accent pb-2">Girls Hub: Style & Organization</h1>
            <p class="mb-6 text-gray-600">Minimalist accessories, aesthetic planners, and stylish gear to complement your campus look.</p>
            <!-- Full grid view for the dedicated page -->
            <div id="girls-hub-products" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Girls Hub products will be rendered here by renderCategoryPage() -->
            </div>
        </section>

        <section id="boys-hub-page" class="content-page hidden min-h-[60vh]">
            <h1 class="text-3xl font-bold text-charcoal mb-8 border-b-2 border-teal-accent pb-2">Boys Hub: Tech & Utility</h1>
            <p class="mb-6 text-gray-600">Durable storage, essential tech gadgets, and tools built for engineering and science students.</p>
            <!-- Full grid view for the dedicated page -->
            <div id="boys-hub-products" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Boys Hub products will be rendered here by renderCategoryPage() -->
            </div>
        </section>

        <section id="bags-page" class="content-page hidden min-h-[60vh]">
            <h1 class="text-3xl font-bold text-charcoal mb-8 border-b-2 border-teal-accent pb-2">Bags & Backpacks</h1>
            <p class="mb-6 text-gray-600">Water-resistant backpacks and simple totes designed to carry laptops and study material safely.</p>
            <!-- Full grid view for the dedicated page -->
            <div id="bags-products" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                <!-- Bags products will be rendered here by renderCategoryPage() -->
            </div>
        </section>

    </main>
    
    <!-- ============================================== -->
    <!-- CHECKOUT MODAL (FIXED OVERLAY) -->
    <!-- ============================================== -->
    <div id="checkout-modal" class="hidden modal-overlay fixed inset-0 z-50 flex items-center justify-center p-4">
        
        <!-- Modal Backdrop (for closing on outside click) -->
        <div class="absolute inset-0" onclick="closeCheckoutModal()"></div>

        <!-- Modal Content Container -->
        <!-- MODAL: max-w-lg is good, adjusted internal padding for better mobile view -->
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all duration-300 relative z-10">
            
            <!-- Close Button -->
            <button onclick="closeCheckoutModal()" class="absolute top-3 right-3 p-2 text-charcoal hover:text-teal-accent transition">
                <!-- Close Icon SVG -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <!-- Checkout Form Content -->
            <div id="modal-content-form">
                <div class="bg-charcoal text-white p-4 sm:p-6 rounded-t-xl text-center">
                    <h2 class="text-xl sm:text-2xl font-bold">Complete Your Order</h2>
                </div>

                <!-- MAIN FORM CONTENT (Responsive Padding: p-4 sm:p-6) -->
                <div class="p-4 sm:p-6">
                    
                    <!-- Product Summary -->
                    <div class="flex items-center space-x-4 mb-6 border-b pb-4">
                        <img id="product-image-modal" src="https://placehold.co/80x80/F4F4F4/2C3E50?text=Item" alt="Product Thumbnail" class="w-16 h-16 object-cover rounded-lg">
                        <div>
                            <p class="text-sm text-gray-500">Item:</p>
                            <h3 id="checkout-product-title" class="text-xl font-semibold text-charcoal truncate">Product Name</h3>
                        </div>
                        <p id="checkout-product-price" class="text-2xl font-extrabold text-teal-accent ml-auto">৳ 000</p>
                    </div>

                    <form id="checkout-form" onsubmit="handleCheckoutSubmit(event)">
                        
                        <!-- 1. Customer Information (Always visible) -->
                        <h4 class="text-lg font-bold text-charcoal mb-3">1. Your Contact Information</h4>
                        <div class="space-y-4 mb-6">
                            <input type="text" id="name" placeholder="Full Name (সম্পূর্ণ নাম)" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-accent focus:border-teal-accent transition">
                            <input type="tel" id="phone" placeholder="Phone Number (ফোন নম্বর)" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-accent focus:border-teal-accent transition">
                            <textarea id="address" placeholder="Full Delivery Address in Rajshahi (সম্পূর্ণ ঠিকানা)" required rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-accent focus:border-teal-accent transition"></textarea>
                        </div>
                        
                        <!-- 2. Payment Method Selection (Collapsible Toggle) -->
                        <button type="button" onclick="togglePaymentSection()" class="w-full flex justify-between items-center text-lg font-bold text-charcoal p-3 mb-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition duration-200 shadow-sm">
                            <span>2. Select Payment Method (পেমেন্ট পদ্ধতি)</span>
                            <!-- Icon: starts pointing right (0deg), rotates 90deg when open -->
                            <svg id="payment-toggle-icon" class="w-5 h-5 transform transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                        </button>
                        
                        <!-- Payment Method Content (Initially Hidden) -->
                        <div id="payment-method-content" class="space-y-3 mb-6 hidden">
                            
                            <!-- bKash Option -->
                            <label class="flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-light-gray transition duration-150 has-checked:border-teal-accent">
                                <input type="radio" name="payment_method" value="bKash" class="form-radio h-5 w-5 text-teal-accent checked:bg-teal-accent focus:ring-teal-accent">
                                <span class="ml-3 font-semibold text-gray-700 flex items-center">
                                    <img src="https://placehold.co/40x20/E11961/FFFFFF?text=bKash" alt="bKash Logo" class="w-10 h-5 object-contain mr-2 rounded">
                                    bKash (মোবাইল ব্যাংকিং)
                                </span>
                            </label>

                            <!-- Rocket Option -->
                            <label class="flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-light-gray transition duration-150">
                                <input type="radio" name="payment_method" value="Rocket" class="form-radio h-5 w-5 text-teal-accent checked:bg-teal-accent focus:ring-teal-accent">
                                <span class="ml-3 font-semibold text-gray-700 flex items-center">
                                    <img src="https://placehold.co/40x20/92278F/FFFFFF?text=Rocket" alt="Rocket Logo" class="w-10 h-5 object-contain mr-2 rounded">
                                    Rocket (মোবাইল ব্যাংকিং)
                                </span>
                            </label>
                            
                            <!-- Nagad Option -->
                            <label class="flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-light-gray transition duration-150">
                                <input type="radio" name="payment_method" value="Nagad" class="form-radio h-5 w-5 text-teal-accent checked:bg-teal-accent focus:ring-teal-accent">
                                <span class="ml-3 font-semibold text-gray-700 flex items-center">
                                    <img src="https://placehold.co/40x20/FF7701/FFFFFF?text=Nagad" alt="Nagad Logo" class="w-10 h-5 object-contain mr-2 rounded">
                                    Nagad (মোবাইল ব্যাংকিং)
                                </span>
                            </label>
                            
                            <!-- Cash on Delivery Option -->
                            <label class="flex items-center p-3 border border-gray-200 rounded-xl cursor-pointer hover:bg-light-gray transition duration-150">
                                <input type="radio" name="payment_method" value="Cash on Delivery" class="form-radio h-5 w-5 text-teal-accent checked:bg-teal-accent focus:ring-teal-accent">
                                <span class="ml-3 font-semibold text-gray-700 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-charcoal" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m4 2h2m-4 0h2m4-2h2m-4 0V9m0 6a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                                    ক্যাশ অন ডেলিভারি (Cash on Delivery)
                                </span>
                            </label>

                        </div>

                        <!-- Summary & Submit -->
                        <div class="flex justify-between items-center bg-gray-100 p-4 rounded-lg mb-4">
                            <span class="text-lg font-semibold text-charcoal">Total Payable (মোট মূল্য):</span>
                            <span id="checkout-total-price" class="text-2xl font-extrabold text-teal-accent">৳ 000</span>
                        </div>
                        
                        <!-- Error Message -->
                        <p id="form-error" class="hidden text-sm text-center text-red-600 mb-4 font-medium"></p>

                        <button type="submit" class="w-full px-6 py-3 bg-teal-accent text-white font-bold rounded-full shadow-lg hover:bg-[#158C7C] transition duration-200 uppercase">
                            অর্ডার করুন (Place Order)
                        </button>
                    </form>
                </div>
            </div>

            <!-- Confirmation Message Content (Hidden until order submission) -->
            <div id="modal-content-confirmation" class="hidden">
                <!-- Content generated by showConfirmationMessage() -->
            </div>
            
        </div>
    </div>
    
    <!-- FOOTER -->
    <footer class="bg-charcoal text-white mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 RajHub. All rights reserved. | Designed for Rajshahi Students.</p>
            <div class="mt-2 space-x-4">
                <a href="#" class="text-gray-400 hover:text-teal-accent">Privacy Policy</a>
                <a href="#" class="text-gray-400 hover:text-teal-accent">Terms of Service</a>
            </div>
        </div>
    </footer>

</body>
</html>
